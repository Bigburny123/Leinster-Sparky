<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Leinster Sparky â€” Instant Quote</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
:root{
  --brand-1: #2b8a3e; 
  --brand-2: #f5c200; 
  --bg-1: #f3f8f4;
  --bg-2: #ffffff;
  --muted: #51606a;
  --card: #ffffff;
  --radius: 12px;
  --maxw: 1100px;
  --accent-shadow: 0 8px 30px rgba(43,138,62,0.08);
}
*{box-sizing:border-box}
body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#07121a;-webkit-font-smoothing:antialiased}
.wrap{max-width:var(--maxw);margin:28px auto;padding:20px}
header{display:flex;align-items:center;gap:16px}
.logo{width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,var(--brand-1),var(--brand-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:22px;box-shadow:var(--accent-shadow)}
h1{margin:0;font-size:22px}
p.lead{margin:6px 0 20px;color:var(--muted)}
.grid{display:grid;grid-template-columns:1fr 380px;gap:20px}
@media (max-width:980px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);padding:18px;border-radius:var(--radius);box-shadow:0 6px 18px rgba(11,18,32,0.04)}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
select,input[type=number],input[type=text],input[type=email],textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #e8f0ed;background:#fff;font-size:15px}
.row{display:flex;gap:12px}
.row > *{flex:1}
.services-list{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px}
.service{background:#fbfdfa;padding:12px;border-radius:10px;border:1px solid #eef7ee}
.service label{display:flex;align-items:center;gap:8px;margin:0}
.price{font-weight:700;color:var(--brand-1)}
.summary{position:sticky;top:18px}
.total{font-size:28px;font-weight:900;margin:0}
.muted{color:var(--muted);font-size:13px}
button.primary{background:linear-gradient(90deg,var(--brand-1),#1e7f2f);color:#fff;padding:12px 18px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
button.ghost{background:transparent;border:1px solid #e6eef3;padding:10px 14px;border-radius:10px;cursor:pointer}
footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}
.modal{position:fixed;inset:0;background:rgba(6,10,15,0.38);display:flex;align-items:center;justify-content:center;padding:20px;z-index:50;visibility:hidden;opacity:0;transition:opacity .18s,visibility .18s}
.modal.open{visibility:visible;opacity:1}
.modal-card{background:#fff;padding:18px;border-radius:12px;max-width:760px;width:100%;box-shadow:0 12px 42px rgba(11,18,32,0.14)}
.modal-grid{display:grid;grid-template-columns:1fr 240px;gap:16px}
@media (max-width:820px){.modal-grid{grid-template-columns:1fr}}
.disclaimer{font-size:13px;color:var(--muted);margin-top:6px}
.small{font-size:13px;color:var(--muted)}
.watermark{position:absolute;right:-40px;top:120px;opacity:0.06;font-size:160px;font-weight:900;color:var(--brand-1);transform:rotate(-20deg);pointer-events:none}
.trusted{display:flex;gap:8px;align-items:center}
.badge{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfff6);border:1px solid #eef7ee}
.badge svg{width:26px;height:26px}
.contact{font-weight:700}
.muted-block{color:var(--muted);font-size:13px}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="logo">LS</div>
  <div>
    <h1 id="bizName">Leinster Sparky</h1>
    <p class="lead">Instant online estimates for domestic electrical work â€” fast, clear and mobile-friendly.</p>
  </div>
  <div style="margin-left:auto;text-align:right">
    <div class="trusted badge">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="#2b8a3e" stroke-width="1.4" fill="#f7fff5"/>
        <path d="M8 12.5l2.2 2.2L16 9" stroke="#2b8a3e" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <div style="text-align:left">
        <div style="font-weight:800">RECI registered</div>
        <div style="font-size:12px;color:var(--muted)">Trusted estimate</div>
      </div>
    </div>
  </div>
</header>

<div class="watermark">ELECTRIC</div>

<main class="grid" role="main">
<section class="card">
<h2 style="margin-top:0">Build your quote</h2>

<div>
<label for="serviceSelect">Main service</label>
<select id="serviceSelect">
  <option value="general">Assessment / Callout</option>
  <option value="sockets">Socket replacement / installation</option>
  <option value="lighting">Light fitting or replacement</option>
  <option value="rewire">Partial rewire (per room)</option>
  <option value="fuse">Fuseboard / consumer unit</option>
  <option value="ev">EV charger (supply & fit)</option>
  <option value="inspection">Inspection & certificate</option>
  <option value="custom">Custom (describe below)</option>
</select>
</div>

<div style="margin-top:12px;" id="dynamicOptions"></div>

<div id="addServiceContainer" style="margin-top:10px;">
  <button id="addServiceBtn" class="primary">Add to quote</button>
  <div id="quoteList" style="margin-top:10px;"></div>
</div>

<div style="margin-top:12px">
<label for="propertyType">Property type</label>
<select id="propertyType">
  <option value="domestic">Domestic - House</option>
  <option value="flat">Domestic - Flat / Apartment</option>
  <option value="commercial">Commercial / Retail</option>
</select>
</div>

<div style="margin-top:12px">
<label>Add-ons / extras</label>
<div class="services-list" id="extrasList">
  <div class="service"><label><input type="checkbox" data-extra="callout"> Callout (within 10km) â€” <span class="price">â‚¬45</span></label></div>
  <div class="service"><label><input type="checkbox" data-extra="certificate"> Electrical cert â€” <span class="price">â‚¬60</span></label></div>
  <div class="service"><label><input type="checkbox" data-extra="weekend"> Weekend / urgent surcharge â€” <span class="price">â‚¬80</span></label></div>
  <div class="service"><label><input type="checkbox" data-extra="smart"> Smart switch fitting â€” <span class="price">â‚¬35</span></label></div>
</div>
</div>

<div style="margin-top:12px">
<label for="notes">Notes / custom description</label>
<textarea id="notes" rows="3" placeholder="Describe custom work if 'Custom' service selected"></textarea>
</div>

<div style="margin-top:12px" class="row">
  <div>
    <label for="custName">Your name</label>
    <input id="custName" type="text" placeholder="Full name">
  </div>
  <div>
    <label for="custEmail">Your email</label>
    <input id="custEmail" type="email" placeholder="you@example.com">
  </div>
</div>

<div style="margin-top:12px" class="row">
  <div>
    <label for="custPhone">Phone</label>
    <input id="custPhone" type="text" placeholder="(optional)">
  </div>
  <div>
    <label for="custPost">Postcode / Town</label>
    <input id="custPost" type="text" placeholder="e.g. D02 or Kilkenny">
  </div>
</div>

<div style="margin-top:12px;display:flex;gap:10px;align-items:center">
  <button id="previewBtn" class="primary">Preview estimate</button>
  <button id="resetBtn" class="ghost">Reset</button>
</div>
</section>

<aside class="summary">
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div class="muted">Estimate total</div>
        <div class="total" id="liveTotal">â‚¬0</div>
      </div>
      <div style="text-align:right">
        <div class="small">Quick tips</div>
        <div class="muted">You can add multiple services and extras. Discounts apply for multiple small items.</div>
      </div>
    </div>
    <hr style="margin:12px 0;border:none;border-top:1px solid #eef4f2">
    <div id="breakdown" class="small muted">No items selected yet.</div>
    <hr style="margin:12px 0;border:none;border-top:1px solid #eef4f2">
    <div style="display:flex;gap:8px">
      <button id="submitEmailBtn" class="primary" style="flex:1">Send quote by email</button>
      <button id="downloadBtn" class="ghost">Download PDF</button>
    </div>
  </div>

  <div style="height:12px"></div>

  <div class="card">
    <div class="muted">Business</div>
    <div style="font-weight:800">Leinster Sparky</div>
    <div class="muted" style="margin-top:8px">Contact below â€” single-page site. Host on GitHub Pages or Netlify for free.</div>
  </div>
</aside>
</main>

<footer style="margin-top:18px">
<div class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
    <div>
      <div style="font-weight:800">Leinster Sparky</div>
      <div class="muted-block">Ryan Byrne</div>
      <div class="muted-block">ðŸ“§ <a href="mailto:ryanbyrne1412@gmail.com">ryanbyrne1412@gmail.com</a> &nbsp; ðŸ“ž 083 188 9402</div>
    </div>
    <div style="max-width:420px" class="muted-block">All quotes are estimates only. Final price may change after inspection. By submitting you agree that a site visit may be required and prices may vary.</div>
  </div>
</div>
</footer>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-card">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <h3 style="margin:0">Estimate preview</h3>
      <div><button id="closeModal" class="ghost">Close</button></div>
    </div>
    <div class="modal-grid" style="margin-top:12px">
      <div>
        <div id="modalBody"></div>
        <p class="disclaimer">This is an <strong>estimate</strong>. Final price may change after inspection. Prices shown are guidelines only.</p>
      </div>
      <div>
        <div class="card" style="padding:12px">
          <div class="muted">Total</div>
          <div style="font-size:22px;font-weight:800" id="modalTotal">â‚¬0</div>
          <div style="margin-top:8px"><button id="sendToCustomer" class="primary" style="width:100%">Email me this estimate</button></div>
          <div style="margin-top:8px"><button id="sendToOwner" class="ghost" style="width:100%">Send a copy to Leinster Sparky</button></div>
          <div style="margin-top:8px" class="small muted">The "Email me" button opens your email app. Quotes are also sent to the owner email configured in the site.</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const CONFIG = {businessName:'Leinster Sparky',currency:'â‚¬',OWNER_EMAIL:'ryanbyrne1412@gmail.com',FORM_ENDPOINT:''};
document.getElementById('bizName').textContent = CONFIG.businessName;

const PRICES = {general:{label:'Assessment / Callout',unit:45},sockets:{label:'Socket (single)',unit:30},lighting:{label:'Light fitting',unit:30},rewire:{label:'Partial rewire (per room)',unit:420},fuse:{label:'Fuseboard upgrade',unit:650},ev:{label:'EV charger (supply & fit)',unit:1200},inspection:{label:'Inspection & certificate',unit:85},custom:{label:'Custom item',unit:0}};
const EXTRA_PRICES = {callout:45,certificate:60,weekend:80,smart:35};

const serviceSelect=document.getElementById('serviceSelect');
const dynamicOptions=document.getElementById('dynamicOptions');
const propertyType=document.getElementById('propertyType');
const extrasList=document.getElementById('extrasList');
const notes=document.getElementById('notes');
const custName=document.getElementById('custName');
const custEmail=document.getElementById('custEmail');
const custPhone=document.getElementById('custPhone');
const custPost=document.getElementById('custPost');
const previewBtn=document.getElementById('previewBtn');
const resetBtn=document.getElementById('resetBtn');
const liveTotal=document.getElementById('liveTotal');
const breakdown=document.getElementById('breakdown');
const modal=document.getElementById('modal');
const modalBody=document.getElementById('modalBody');
const modalTotal=document.getElementById('modalTotal');
const closeModal=document.getElementById('closeModal');
const sendToCustomer=document.getElementById('sendToCustomer');
const sendToOwner=document.getElementById('sendToOwner');
const submitEmailBtn=document.getElementById('submitEmailBtn');
const downloadBtn=document.getElementById('downloadBtn');
const addServiceBtn=document.getElementById('addServiceBtn');
const quoteList=document.getElementById('quoteList');

let state={servicesInQuote:[],extras:{},property:'domestic',notes:'',customer:{name:'',email:'',phone:'',post:''},total:0};

function init(){
  renderDynamicOptions();
  renderQuoteList();
  calculate();
  attachEventListeners();
}

function renderDynamicOptions(){
  const s=serviceSelect.value;
  dynamicOptions.innerHTML='';
  if(s==='custom'){
    dynamicOptions.innerHTML=`<label>Custom item title</label><input id='customTitle' placeholder='e.g. install new consumer unit'><label style='margin-top:10px'>Estimated units / qty</label><input id='customQty' type='number' min='1' value='1'>`;
  }else{
    dynamicOptions.innerHTML=`<label>Quantity</label><input id='qty' type='number' min='1' value='1'>`;
  }
  const priceLabel=PRICES[s]?PRICES[s].unit:0;
  const hint=document.createElement('div');hint.style.marginTop='8px';hint.className='muted';
  const fromText=(s==='rewire'||s==='fuse'||s==='ev')?'from ':'';
  hint.textContent=`Unit price: ${fromText}${CONFIG.currency}${priceLabel} (${PRICES[s]?PRICES[s].label:''})`;
  dynamicOptions.appendChild(hint);
}

function attachEventListeners(){
  serviceSelect.addEventListener('change',()=>renderDynamicOptions());
  propertyType.addEventListener('change',()=>{state.property=propertyType.value;calculate();});
  extrasList.addEventListener('change',()=>{state.extras={};extrasList.querySelectorAll('input[type=checkbox]').forEach(cb=>{if(cb.checked){state.extras[cb.dataset.extra]=true}});calculate();});
  notes.addEventListener('input',()=>state.notes=notes.value);
  custName.addEventListener('input',()=>state.customer.name=custName.value);
  custEmail.addEventListener('input',()=>state.customer.email=custEmail.value);
  custPhone.addEventListener('input',()=>state.customer.phone=custPhone.value);
  custPost.addEventListener('input',()=>state.customer.post=custPost.value);
  previewBtn.addEventListener('click',openPreview);
  closeModal.addEventListener('click',()=>modal.classList.remove('open'));
  sendToCustomer.addEventListener('click',sendCustomerMail);
  sendToOwner.addEventListener('click',sendOwnerMail);
  submitEmailBtn.addEventListener('click',sendOwnerMail);
  resetBtn.addEventListener('click',resetForm);
  downloadBtn.addEventListener('click',downloadPDF);
  addServiceBtn.addEventListener('click',addServiceToQuote);
}

function addServiceToQuote(){
  const s=serviceSelect.value;
  let qty=1,customTitle='';
  if(s==='custom'){
    const t=document.getElementById('customTitle'),q=document.getElementById('customQty');
    if(!t||!q)return; qty=Number(q.value||1); customTitle=t.value||'Custom item';
  }else{ const q=document.getElementById('qty'); qty=q?Number(q.value||1):1; }
  state.servicesInQuote.push({key:s,qty,customTitle});
  renderQuoteList(); calculate();
}

function renderQuoteList(){
  quoteList.innerHTML='';
  state.servicesInQuote.forEach((item,idx)=>{
    const label=PRICES[item.key]?PRICES[item.key].label:item.customTitle;
    const price=PRICES[item.key]?PRICES[item.key].unit:0;
    const div=document.createElement('div');div.className='service';
    div.innerHTML=`${label} x ${item.qty} = ${CONFIG.currency}${price*item.qty} <button data-idx="${idx}" style="margin-left:10px;">Remove</button>`;
    quoteList.appendChild(div);
  });
  quoteList.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click',e=>{state.servicesInQuote.splice(e.target.dataset.idx,1);renderQuoteList();calculate();});
  });
}

function calculate(){
  let base=0;state.servicesInQuote.forEach(i=>{const p=PRICES[i.key]?PRICES[i.key].unit:0;base+=p*i.qty;});
  let surcharge=0;if(state.property==='commercial')surcharge=Math.round(base*0.18);if(state.property==='flat')surcharge=Math.round(base*0.06);
  let extrasTotal=0;for(const k in state.extras){if(EXTRA_PRICES[k])extrasTotal+=EXTRA_PRICES[k];}
  let smallCount=0;state.servicesInQuote.forEach(i=>{if(['sockets','lighting'].includes(i.key))smallCount+=i.qty;});if(state.extras.smart)smallCount+=1;
  let discountPct=0;if(smallCount>=5)discountPct=0.15;else if(smallCount>=3)discountPct=0.10;
  const subtotalBeforeDiscount=base+surcharge+extrasTotal;
  const discountAmount=Math.round(subtotalBeforeDiscount*discountPct);
  const subtotal=subtotalBeforeDiscount-discountAmount;
  state.total=subtotal;state.discount=discountAmount;state.discountPct=discountPct;
  liveTotal.textContent=`${CONFIG.currency}${state.total}`;
  updateBreakdown();
}

function updateBreakdown(){
  const parts=[];
  state.servicesInQuote.forEach(item=>{const label=PRICES[item.key]?PRICES[item.key].label:item.customTitle;const price=PRICES[item.key]?PRICES[item.key].unit:0;parts.push(`${label} x ${item.qty} = ${CONFIG.currency}${price*item.qty}`);});
  if(state.property!=='domestic')parts.push(`Property surcharge (${state.property}) applied`);
  for(const k in state.extras){if(EXTRA_PRICES[k])parts.push(`${k} = ${CONFIG.currency}${EXTRA_PRICES[k]}`);}
  if(state.discount&&state.discount>0)parts.push(`Discount applied: -${CONFIG.currency}${state.discount} (${Math.round(state.discountPct*100)}%)`);
  if(state.servicesInQuote.length===0&&Object.keys(state.extras).length===0)parts.push('No items selected yet.');
  breakdown.innerHTML=parts.map(p=>`<div>${p}</div>`).join('');
}

function openPreview(){
  const servicesText=state.servicesInQuote.map(i=>{const l=PRICES[i.key]?PRICES[i.key].label:i.customTitle;const p=PRICES[i.key]?PRICES[i.key].unit:0;return`${l} x ${i.qty} => ${CONFIG.currency}${p*i.qty}`}).join('\n');
  modalBody.innerHTML=`<div><strong>Customer</strong>: ${custName.value||'â€”'}<br>${custEmail.value?custEmail.value+'<br>':''}${custPhone.value?custPhone.value+'<br>':''}${custPost.value?custPost.value+'<br>':''}</div><hr><div><strong>Estimate</strong></div><div style="margin-top:6px">${servicesText.replace(/\n/g,'<br>')}</div><div style='margin-top:6px'>Extras: ${Object.keys(state.extras).length?Object.keys(state.extras).join(', '):'None'}</div><div style='margin-top:6px'>Notes: ${notes.value||'â€”'}</div>`;
  modalTotal.textContent=`${CONFIG.currency}${state.total}`;modal.classList.add('open');
}

function sendCustomerMail(){
  const email=custEmail.value;if(!email){alert('Enter customer email');return;}
  const subject=encodeURIComponent(`${CONFIG.businessName} â€” Your estimate`);
  const body=encodeURIComponent(`Hello ${custName.value||''},\n\nTotal: ${CONFIG.currency}${state.total}\n\nItems:\n${breakdown.textContent}\n\nNotes: ${notes.value||'â€”'}\n\nEstimate only. Regards, ${CONFIG.businessName}`);
  window.location.href=`mailto:${email}?subject=${subject}&body=${body}`;
}

function sendOwnerMail(){
  const owner=CONFIG.OWNER_EMAIL;const subject=encodeURIComponent(`${CONFIG.businessName} â€” New quote`);const body=encodeURIComponent(`Customer: ${custName.value}\nEmail: ${custEmail.value}\nPhone: ${custPhone.value}\nPost: ${custPost.value}\n\nItems:\n${breakdown.textContent}\n\nNotes: ${notes.value}\nTotal: ${CONFIG.currency}${state.total}\n\nEstimate only`);
  window.location.href=`mailto:${owner}?subject=${subject}&body=${body}`;modal.classList.remove('open');
}

function resetForm(){
  serviceSelect.value='general';propertyType.value='domestic';
  extrasList.querySelectorAll('input[type=checkbox]').forEach(cb=>cb.checked=false);
  notes.value='';custName.value='';custEmail.value='';custPhone.value='';custPost.value='';
  state.servicesInQuote=[];state.extras={};
  renderDynamicOptions();renderQuoteList();calculate();
}

function downloadPDF(){
  const servicesText=state.servicesInQuote.map(i=>{const l=PRICES[i.key]?PRICES[i.key].label:i.customTitle;const p=PRICES[i.key]?PRICES[i.key].unit:0;return`${l} x ${i.qty} = ${CONFIG.currency}${p*i.qty}`}).join('\n');
  const content=`Estimate from ${CONFIG.businessName}\n\nCustomer: ${custName.value}\nEmail: ${custEmail.value}\nPhone: ${custPhone.value}\nPost: ${custPost.value}\n\nItems:\n${servicesText}\n\nExtras: ${Object.keys(state.extras).length?Object.keys(state.extras).join(', '):'None'}\n\nNotes:\n${notes.value}\n\nTotal: ${CONFIG.currency}${state.total}\n\nEstimate only`;
  const blob=new Blob([content],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='estimate.txt';a.click();URL.revokeObjectURL(url);
}

init();
</script>
</body>
</html>
